# Mental Health Assessment Application

A Java Servlet-based web application for mental health assessment with therapist recommendations, built with Jakarta EE and PostgreSQL.

## ğŸš€ Features

- User registration and authentication
- Mental health stress assessment quiz
- Automated therapist recommendations based on stress levels
- Appointment booking system
- Persistent data storage with PostgreSQL
- Responsive web interface

## ğŸ› ï¸ Technology Stack

- **Backend**: Java 17, Jakarta EE Servlets
- **Frontend**: JSP, HTML5, CSS3, JavaScript
- **Database**: PostgreSQL (Neon)
- **Build Tool**: Maven
- **Server**: Apache Tomcat 10.1
- **Deployment**: Docker + Render

## ğŸ“‹ Prerequisites

- Java 17 or higher
- Maven 3.6+
- Docker (for containerized deployment)
- PostgreSQL database (Neon recommended)

## ğŸ  Local Development

### 1. Clone the repository
```bash
git clone <your-repo-url>
cd StressApp_Unique
```

### 2. Build the application
```bash
mvn clean package
```

### 3. Run with Docker Compose (Local PostgreSQL)
```bash
docker-compose up --build
```
Access at: `http://localhost:8080/StressApp/`

### 4. Run with existing Tomcat (External Database)
```bash
# Copy WAR to Tomcat webapps
cp target/StressApp.war /path/to/tomcat/webapps/

# Set environment variables
export DATABASE_URL="your-database-url"
export DATABASE_USERNAME="your-username"
export DATABASE_PASSWORD="your-password"
```

## ğŸš€ Deployment to Render

### 1. Prepare for Deployment

Ensure your `render.yaml` is configured:
```yaml
services:
  - type: web
    name: stress-app
    runtime: docker
    buildCommand: "mvn clean package -DskipTests"
    startCommand: "docker run -p $PORT:8080 stress-app"
    envVars:
      - key: DATABASE_URL
        sync: false
      - key: DATABASE_USERNAME
        sync: false
      - key: DATABASE_PASSWORD
        sync: false
```

### 2. Environment Variables

Set these in your Render dashboard:

| Variable | Description | Example |
|----------|-------------|---------|
| `DATABASE_URL` | PostgreSQL connection URL | `jdbc:postgresql://host:port/dbname` |
| `DATABASE_USERNAME` | Database username | `your_db_user` |
| `DATABASE_PASSWORD` | Database password | `your_db_password` |
| `PORT` | Port (auto-generated by Render) | `10000` |

### 3. Deploy Steps

1. **Connect Repository**: Link your GitHub repository to Render
2. **Configure Service**:
   - Service Type: `Web Service`
   - Runtime: `Docker`
   - Build Command: `mvn clean package -DskipTests`
   - Start Command: `docker run -p $PORT:8080 stress-app`
3. **Set Environment Variables** (see table above)
4. **Deploy**: Click "Create Web Service"

### 4. Database Setup

Your application will automatically create/modify the required tables:
- `users` table for user accounts
- `bookings` table for appointments

## ğŸ—„ï¸ Database Schema

```sql
-- Users table
CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    location VARCHAR(100),
    age INTEGER,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- Bookings table
CREATE TABLE bookings (
    id SERIAL PRIMARY KEY,
    username VARCHAR(50) NOT NULL,
    therapist VARCHAR(100) NOT NULL,
    slot VARCHAR(20) NOT NULL,
    booking_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(therapist, slot)
);
```

## ğŸ§ª Testing

### Database Connection Test
Visit: `https://your-render-app-url/dbtest`

### Application Features
1. **Home Page**: `https://your-render-app-url/StressApp/`
2. **Registration**: Click "Register" link
3. **Login**: Use registered credentials or demo (`user`/`pass`)
4. **Assessment**: Complete the 5-question stress quiz
5. **Results**: View stress level and therapist recommendations
6. **Booking**: Schedule appointments with therapists

## ğŸ”§ Configuration

### Environment Variables

The application reads database configuration from environment variables:

- `DATABASE_URL`: Full JDBC connection string
- `DATABASE_USERNAME`: Database user
- `DATABASE_PASSWORD`: Database password

### Default Fallback

If environment variables are not set, the application falls back to Neon database credentials.

## ğŸ“ Project Structure

```
StressApp_Unique/
â”œâ”€â”€ src/main/java/com/stress/
â”‚   â”œâ”€â”€ BookingServlet.java      # Appointment booking
â”‚   â”œâ”€â”€ DatabaseInitServlet.java # Database initialization
â”‚   â”œâ”€â”€ DatabaseTestServlet.java # Connection testing
â”‚   â”œâ”€â”€ DatabaseUtil.java        # Database utilities
â”‚   â”œâ”€â”€ FormServlet.java         # Quiz form handling
â”‚   â”œâ”€â”€ LoginServlet.java        # User authentication
â”‚   â”œâ”€â”€ LogoutServlet.java       # Session management
â”‚   â”œâ”€â”€ RegisterServlet.java     # User registration
â”‚   â”œâ”€â”€ StressServlet.java       # Quiz processing
â”‚   â””â”€â”€ User.java               # User model
â”œâ”€â”€ src/main/webapp/
â”‚   â”œâ”€â”€ WEB-INF/web.xml         # Servlet configuration
â”‚   â”œâ”€â”€ *.jsp                   # JSP pages
â”‚   â””â”€â”€ css/                    # Stylesheets
â”œâ”€â”€ Dockerfile                  # Docker configuration
â”œâ”€â”€ docker-compose.yml          # Local development
â”œâ”€â”€ render.yaml                 # Render deployment
â”œâ”€â”€ pom.xml                     # Maven configuration
â””â”€â”€ README.md                   # This file
```

## ğŸ¤ Contributing

1. Fork the repository
2. Create a feature branch
3. Commit your changes
4. Push to the branch
5. Create a Pull Request

## ğŸ“„ License

This project is licensed under the MIT License - see the LICENSE file for details.

## ğŸ†˜ Support

If you encounter issues:

1. Check the application logs in Render dashboard
2. Verify environment variables are set correctly
3. Test database connectivity using `/dbtest` endpoint
4. Ensure your PostgreSQL database allows external connections

---

**Happy Deploying! ğŸš€**
